{% extends "auctions/layout.html" %}

{% block title %}{{ category }} - AuctionHub{% endblock %}

{% block body %}
<div class="page-header" data-aos="fade-up">
    <div>
        <h2 class="page-title">{{ category }}</h2>
        <p class="page-subtitle">
            <a href="{% url 'categories' %}" style="color: var(--primary); text-decoration: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle;"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
                All Categories
            </a>
            <span style="color: var(--gray-400); margin: 0 0.5rem;">/</span>
            {{ category }}
        </p>
    </div>
</div>

{% if listings %}
<div class="listings-grid">
    {% for listing in listings %}
    <div class="listing-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:0 }}0">
        <!-- Image Container -->
        <div class="listing-image-container">
            <img src="{{ listing.image_url }}" alt="{{ listing.title }}" class="listing-image" onerror="this.src='https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop'">
            {% if listing.is_active %}
            <span class="listing-badge">Live</span>
            {% else %}
            <span class="listing-badge" style="background: var(--gray-500);">Ended</span>
            {% endif %}
        </div>
        
        <!-- Content -->
        <div class="listing-content">
            <span class="listing-category">{{ listing.category }}</span>
            <a href="{% url 'listing' listing.id %}" class="listing-title">{{ listing.title }}</a>
            
            <div class="listing-price-section">
                <div class="listing-price-label">Current Bid</div>
                <div class="listing-price">${{ listing.highest_bid }}</div>
            </div>
            
            <div class="listing-owner">{{ listing.owner }}</div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state" data-aos="fade-up">
    <div class="empty-state-icon">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
            <line x1="12" y1="22.08" x2="12" y2="12"/>
        </svg>
    </div>
    <h3 style="color: var(--gray-800); margin-bottom: 0.5rem;">No Listings in {{ category }}</h3>
    <p class="empty-state-text">Be the first to create a listing in this category!</p>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
        <a href="{% url 'categories' %}" class="btn btn-outline">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
            Browse Categories
        </a>
        {% if user.is_authenticated %}
        <a href="{% url 'create' %}" class="btn btn-primary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Create Listing
        </a>
        {% endif %}
    </div>
</div>
{% endif %}
{% endblock %}
